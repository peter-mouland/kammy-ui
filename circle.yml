machine:
  timezone:
    Europe/London
  node:
    version: v9.3.0
  java:
    version: openjdk8
general:
  artifacts:
    - tests/xb/tests_output
    - tests/xb/tests_screenshots
dependencies:
  cache_directories:
    - browserstack
    - node_modules
test:
  override:
    - npm run test -- --reporter mocha-junit-reporter
    - npm run build
  post:
    - git config --global user.name "Peter Mouland"
    - git config --global user.email "peter.mouland@gmail.com"
deployment:
  main:
    branch: master
    commands:
      - "[[ ! -s \"$(git rev-parse --git-dir)/shallow\" ]] || git fetch --unshallow"
      - git push git@heroku.com:kammy-ui.git $CIRCLE_SHA1:refs/heads/master -f --no-verify
